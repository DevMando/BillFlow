@page "/create-bill"
@inject BillFlowContext BillFlowContext
@rendermode InteractiveServer
@using Radzen
@using Radzen.Blazor
@inject DialogService DialogService

<RadzenRow>
	<RadzenColumn Size="12">
		<RadzenLabel Text="Bill Name" />
		<RadzenTextBox @bind-Value="@bill.Name" Name="Name" Style="width:100%" />
	</RadzenColumn>
	<RadzenColumn Size="12">
		<RadzenLabel Text="Description" />
		<RadzenTextBox @bind-Value="@bill.Description" Name="Description" Style="width:100%" />
	</RadzenColumn>
</RadzenRow>

<RadzenRow style="margin-top:10px">
	<RadzenColumn Size="12">
		<RadzenLabel Text="Monthly Bill" />
		<RadzenCheckBox @bind-Value="@bill.IsMonthy" Name="MonthlyBill" />
	</RadzenColumn>
</RadzenRow>

<RadzenRow style="margin-top:10px">
	<RadzenColumn Size="6">
		<RadzenLabel Text="Amount Due" />
		<RadzenNumeric @bind-Value="@bill.AmountDue" Name="Amount Due" />
	</RadzenColumn>
	<RadzenColumn Size="6">
		<RadzenLabel Text="Due Date" />
		<RadzenDatePicker @bind-Value="@bill.DueDate" Name="DueDate" />
	</RadzenColumn>
</RadzenRow>

<RadzenRow Style="margin-top:10px">
	<RadzenColumn Size="6">
		<RadzenLabel Text="Balance" />
		<RadzenNumeric @bind-Value="@bill.Balance" Name="Balance" />
	</RadzenColumn>
</RadzenRow>

<RadzenStack style="margin-top:10px" Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center">
	<RadzenButton Text="Save" Click="Save" Disabled="@IsSaving" ButtonStyle="ButtonStyle.Info" />
	<RadzenButton Text="Cancel" Click="() => DialogService.Close(false)" ButtonStyle="ButtonStyle.Light" />
</RadzenStack>



@code {

	protected Bill bill = new Bill();
	protected bool IsSaving = false;

	protected async Task Save()
	{
		IsSaving = true;
		await Task.Yield();

		BillFlowContext.Bills.Add(bill);
		await BillFlowContext.SaveChangesAsync();

		IsSaving = false;
		DialogService.Close();
	}

}
